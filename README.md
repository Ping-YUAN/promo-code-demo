# PromoCodeDemo

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨


## Start the app

To start the development server run `npm run serve`. 
If you want to choose another port number, you can rename `.env.template` to `.env` and change the default port number in `.env` file. 
You should also provide the `WEATHER_API_KEY` so that the server can communicate with weather provider site. 

Then you can open postman to test the api. 

## Technical

This repository is based on @nestjs which fully supported typescript  and it used also framework express.
By the way in the project, we use Observerable from lib `rxjs` to help us management the async requests. 

## API
There exist two restful API:

`api/promo-management`: used to perform CRUD Promo Code. 
`api/promo-valid`: used to valid a promo code for users. 

## Algorithm
The algorithm is similar to the deep first algorithm. 

We will push the "Or" or "And" operation into the stack and then move on to the next til we arrive the leaf rule. 

As for the leaf rule, we will check it's type and based on it's type to handle it in different ways. This can be easily extend if in the future we would like to have more complex promo rule. Developer can focus on the type and it's implementation.

All values are emited by observable to help us handle the async requests possible for example to weather api. 

After all rules' value is calculated then we will give it back the finaly value to the request.